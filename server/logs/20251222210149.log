2025-12-22 21:01:49.675 | INFO     | __main__:<module>:26 - server start ws://localhost:9160
2025-12-22 21:01:50.459 | INFO     | ws_session:open:25 - request_id: 625e88c5-7ae2-48ca-83fa-f856c2ddb0ee connect success
2025-12-22 21:03:52.946 | INFO     | ws_session:open:25 - request_id: 838e3e02-2959-4040-b706-72e3a38f1c02 connect success
2025-12-22 21:04:18.528 | ERROR    | exam:final_submit_exam:411 - final_submit_exam error: cannot access free variable 'traceback' where it is not associated with a value in enclosing scope
2025-12-22 21:04:18.531 | ERROR    | exam:final_submit_exam:413 - traceback: Traceback (most recent call last):
  File "D:\workspace\petsbattle\server\exam.py", line 289, in process_question
    result = await ag.execute(content)
             ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\workspace\petsbattle\server\agent\agent.py", line 18, in execute
    result = await llm.req_gpt(self.system_prompt, content)
                   ^^^
NameError: name 'llm' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\workspace\petsbattle\server\exam.py", line 340, in final_submit_exam
    results = await asyncio.gather(*tasks)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\workspace\petsbattle\server\exam.py", line 327, in process_question
    logger.error(f"Error processing question {question_idx}: {e} {traceback.format_exc()}")
                                                                  ^^^^^^^^^
NameError: cannot access free variable 'traceback' where it is not associated with a value in enclosing scope. Did you forget to import 'traceback'?

2025-12-22 21:04:43.528 | INFO     | ws_session:on_close:57 - request_id: 838e3e02-2959-4040-b706-72e3a38f1c02, on_close
